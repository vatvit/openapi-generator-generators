<?php

declare(strict_types=1);

namespace {{modelPackage}};

use Symfony\Component\Validator\Constraints as Assert;

/**
 * {{className}}
 *
 * Query parameters DTO for {{operationId}} operation.
 * {{httpMethod}} {{{path}}}
 *
 * Auto-generated from OpenAPI specification.
 *
 * @generated
 */
{{#queryParamsFinal}}final {{/queryParamsFinal}}class {{className}}
{
    public function __construct(
{{#queryParams}}
{{#description}}
        /** {{description}} */
{{/description}}
{{#isInteger}}
        public ?int ${{paramName}}{{#hasDefault}} = {{defaultValue}}{{/hasDefault}}{{^hasDefault}} = null{{/hasDefault}},
{{/isInteger}}
{{#isNumber}}
        public ?float ${{paramName}}{{#hasDefault}} = {{defaultValue}}{{/hasDefault}}{{^hasDefault}} = null{{/hasDefault}},
{{/isNumber}}
{{#isBoolean}}
        public ?bool ${{paramName}}{{#hasDefault}} = {{defaultValue}}{{/hasDefault}}{{^hasDefault}} = null{{/hasDefault}},
{{/isBoolean}}
{{#isString}}
        public ?string ${{paramName}}{{#hasDefault}} = {{defaultValue}}{{/hasDefault}}{{^hasDefault}} = null{{/hasDefault}},
{{/isString}}
{{#isArray}}
        /** @var array<mixed>|null */
        public ?array ${{paramName}}{{#hasDefault}} = {{defaultValue}}{{/hasDefault}}{{^hasDefault}} = null{{/hasDefault}},
{{/isArray}}
{{/queryParams}}
    ) {}

    /** @param array<string, mixed> $query */
    public static function fromQuery(array $query): self
    {
        return new self(
{{#queryParams}}
{{#isInteger}}
            {{paramName}}: isset($query['{{baseName}}']) ? (int) $query['{{baseName}}'] : {{#hasDefault}}{{defaultValue}}{{/hasDefault}}{{^hasDefault}}null{{/hasDefault}},
{{/isInteger}}
{{#isNumber}}
            {{paramName}}: isset($query['{{baseName}}']) ? (float) $query['{{baseName}}'] : {{#hasDefault}}{{defaultValue}}{{/hasDefault}}{{^hasDefault}}null{{/hasDefault}},
{{/isNumber}}
{{#isBoolean}}
            {{paramName}}: isset($query['{{baseName}}']) ? filter_var($query['{{baseName}}'], FILTER_VALIDATE_BOOLEAN) : {{#hasDefault}}{{defaultValue}}{{/hasDefault}}{{^hasDefault}}null{{/hasDefault}},
{{/isBoolean}}
{{#isString}}
            {{paramName}}: $query['{{baseName}}'] ?? {{#hasDefault}}{{defaultValue}}{{/hasDefault}}{{^hasDefault}}null{{/hasDefault}},
{{/isString}}
{{#isArray}}
            {{paramName}}: $query['{{baseName}}'] ?? {{#hasDefault}}{{defaultValue}}{{/hasDefault}}{{^hasDefault}}null{{/hasDefault}},
{{/isArray}}
{{/queryParams}}
        );
    }
}
